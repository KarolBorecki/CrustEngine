\hypertarget{_renderer_8hpp_source}{}\doxysection{Renderer.\+hpp}
\label{_renderer_8hpp_source}\index{/Users/karolborecki/Desktop/CrustEngine/Code/Inc/Rendering/Renderer.hpp@{/Users/karolborecki/Desktop/CrustEngine/Code/Inc/Rendering/Renderer.hpp}}
\mbox{\hyperlink{_renderer_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef \_RENDERER\_HPP\_}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define \_RENDERER\_HPP\_}}
\DoxyCodeLine{3 }
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include <math.h>} \textcolor{comment}{/* cos, sin, sqrt */}}
\DoxyCodeLine{5 }
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_matrix_8hpp}{Physics/Matrix.hpp}}>}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_camera_8hpp}{Core/Camera.hpp}}>}}
\DoxyCodeLine{9 }
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_renderer_wrapper_8hpp}{Rendering/RendererWrapper.hpp}}>}}
\DoxyCodeLine{11 }
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_vector3_8hpp}{Physics/Vector3.hpp}}>}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_vector4_8hpp}{Physics/Vector4.hpp}}>}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_triangle_8hpp}{Physics/Triangle.hpp}}>}}
\DoxyCodeLine{15 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_render_object_8hpp}{Rendering/Objects/RenderObject.hpp}}>}}
\DoxyCodeLine{16 }
\DoxyCodeLine{23 \textcolor{keyword}{class }\mbox{\hyperlink{class_renderer}{Renderer}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_renderer_wrapper}{RendererWrapper}} \{}
\DoxyCodeLine{24 \textcolor{keyword}{public}:}
\DoxyCodeLine{31   \mbox{\hyperlink{class_renderer}{Renderer}}(\textcolor{keywordtype}{int} \_width, \textcolor{keywordtype}{int} \_height);}
\DoxyCodeLine{35   \mbox{\hyperlink{class_renderer_afeee408862d5bd6255a6882d47e6d5cd}{\string~Renderer}}();}
\DoxyCodeLine{36 }
\DoxyCodeLine{44   \textcolor{keywordtype}{void} \mbox{\hyperlink{class_renderer_aa08362456da3321f246d4de151232e27}{DrawTri}}(\mbox{\hyperlink{class_triangle}{Triangle}}* tri);}
\DoxyCodeLine{45 }
\DoxyCodeLine{60   \textcolor{keywordtype}{void} \mbox{\hyperlink{class_renderer_a05d32dacc896f21d4975a0c5655a402d}{DrawMesh}}(\mbox{\hyperlink{class_mesh}{Mesh}}* mesh, \mbox{\hyperlink{class_vector3}{Vector3}}* pos, \mbox{\hyperlink{class_vector3}{Vector3}}* rot, \mbox{\hyperlink{class_camera}{Camera}}* cam, \mbox{\hyperlink{class_vector3}{Vector3}}* lightDir, \textcolor{keywordtype}{bool} projectLight);}
\DoxyCodeLine{61 }
\DoxyCodeLine{76   \mbox{\hyperlink{class_triangle}{Triangle}}* \mbox{\hyperlink{class_renderer_ae150d2d3f583b20e971ad60197205e36}{ProjectTriangle}}(\mbox{\hyperlink{class_triangle}{Triangle}}* tri, \mbox{\hyperlink{class_vector3}{Vector3}}* pos, \mbox{\hyperlink{class_vector3}{Vector3}}* rot, \mbox{\hyperlink{class_camera}{Camera}}* cam, \mbox{\hyperlink{class_vector3}{Vector3}}* lightDir, \textcolor{keywordtype}{bool} projectLight);}
\DoxyCodeLine{77 }
\DoxyCodeLine{83   \mbox{\hyperlink{class_matrix}{Matrix}}* \mbox{\hyperlink{class_renderer_a1aefc3c14b9db1a0a7abfb784547018e}{GetProjectionMatrix}}();}
\DoxyCodeLine{84 }
\DoxyCodeLine{96   \textcolor{keywordtype}{void} \mbox{\hyperlink{class_renderer_a97146506b00259301115bec677ab29e6}{RecalculateProjectionMatrix}}(\mbox{\hyperlink{class_camera}{Camera}}* cam);}
\DoxyCodeLine{97 }
\DoxyCodeLine{98   \textcolor{comment}{/* This value should not be changed without full understanding of this change! */}}
\DoxyCodeLine{99   \textcolor{keyword}{static} \textcolor{keyword}{constexpr} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_renderer_a6abcaa726ad275908c817f4592760fda}{PROJ\_MATRIX\_SIZE}} \{ 4 \};}
\DoxyCodeLine{100 }
\DoxyCodeLine{101 \textcolor{keyword}{private}:}
\DoxyCodeLine{102   \textcolor{keywordtype}{double} aspectRatio \{ 0.0 \}; }
\DoxyCodeLine{103   \mbox{\hyperlink{class_matrix}{Matrix}}* projMatrix; }
\DoxyCodeLine{104 }
\DoxyCodeLine{105 \};}
\DoxyCodeLine{106 }
\DoxyCodeLine{107 \mbox{\hyperlink{class_renderer_a9972ee4e3b677e08bb5b5c0a6b7163c9}{Renderer::Renderer}}(\textcolor{keywordtype}{int} \_width, \textcolor{keywordtype}{int} \_height) : \mbox{\hyperlink{class_renderer_wrapper}{RendererWrapper}}(\_width, \_height) \{}
\DoxyCodeLine{108   \mbox{\hyperlink{class_logger_ae9cc87d3a78f21600b1c5f98c43cd3b8}{Logger::Log}}(\textcolor{stringliteral}{"{}============Rednerer creation============"{}});}
\DoxyCodeLine{109   aspectRatio = ((double)\_height / (\textcolor{keywordtype}{double})\_width);}
\DoxyCodeLine{110   \mbox{\hyperlink{class_logger_aae69f0478dbd5d719e70a8af3b154761}{Logger::Info}}(\textcolor{stringliteral}{"{}ASPECT RATIO: \%lf"{}}, aspectRatio);}
\DoxyCodeLine{111   projMatrix = \textcolor{keyword}{new} \mbox{\hyperlink{class_matrix}{Matrix}}(\mbox{\hyperlink{class_renderer_a6abcaa726ad275908c817f4592760fda}{PROJ\_MATRIX\_SIZE}}, \mbox{\hyperlink{class_renderer_a6abcaa726ad275908c817f4592760fda}{PROJ\_MATRIX\_SIZE}}, 0.0);}
\DoxyCodeLine{112   \mbox{\hyperlink{class_logger_ae9cc87d3a78f21600b1c5f98c43cd3b8}{Logger::Log}}(\textcolor{stringliteral}{"{}============Rednerer creation DONE============"{}});}
\DoxyCodeLine{113 \}}
\DoxyCodeLine{114 }
\DoxyCodeLine{115 \mbox{\hyperlink{class_renderer_afeee408862d5bd6255a6882d47e6d5cd}{Renderer::\string~Renderer}}() \{}
\DoxyCodeLine{116   \textcolor{keywordflow}{if} (projMatrix == \textcolor{keyword}{nullptr}) \textcolor{keywordflow}{return};}
\DoxyCodeLine{117   \textcolor{keyword}{delete} projMatrix;}
\DoxyCodeLine{118 \}}
\DoxyCodeLine{119 }
\DoxyCodeLine{120 \textcolor{keywordtype}{void} \mbox{\hyperlink{class_renderer_a05d32dacc896f21d4975a0c5655a402d}{Renderer::DrawMesh}}(\mbox{\hyperlink{class_mesh}{Mesh}}* mesh, \mbox{\hyperlink{class_vector3}{Vector3}}* pos, \mbox{\hyperlink{class_vector3}{Vector3}}* rot, \mbox{\hyperlink{class_camera}{Camera}}* cam, \mbox{\hyperlink{class_vector3}{Vector3}}* lightDir, \textcolor{keywordtype}{bool} projectLight) \{}
\DoxyCodeLine{121   \mbox{\hyperlink{class_logger_ae9cc87d3a78f21600b1c5f98c43cd3b8}{Logger::Log}}(\textcolor{stringliteral}{"{}Drawing mesh \%s"{}}, mesh-\/>\mbox{\hyperlink{class_mesh_a8c8e87bb63f0fd8648effba210ddf082}{GetName}}().c\_str());}
\DoxyCodeLine{122   \mbox{\hyperlink{class_renderer_wrapper_af2a519ad1b95f9a46a6377b46bfdacc8}{SetDrawColor}}(\mbox{\hyperlink{class_renderer_wrapper_a9a3cfe775f88bf5b58b293618c1fe8ceaf52bf2a736093a3b4ae6c3a99fcc1269}{RendererWrapper::RendererColor::WHITE}});}
\DoxyCodeLine{123 }
\DoxyCodeLine{124   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=0; i < mesh-\/>\mbox{\hyperlink{class_mesh_a0657100f56c0f80790e4bf8cd57295ed}{GetTrianglesCount}}(); i++) \{}
\DoxyCodeLine{125     \mbox{\hyperlink{class_renderer_ae150d2d3f583b20e971ad60197205e36}{ProjectTriangle}}(mesh-\/>\mbox{\hyperlink{class_mesh_aa31be6805b7ccc048ce37f3f27775847}{GetTriangle}}(i), pos, rot, cam, lightDir, projectLight);}
\DoxyCodeLine{126   \}}
\DoxyCodeLine{127   \mbox{\hyperlink{class_logger_ae9cc87d3a78f21600b1c5f98c43cd3b8}{Logger::Log}}(\textcolor{stringliteral}{"{}Drawing mesh \%s DONE!"{}}, mesh-\/>\mbox{\hyperlink{class_mesh_a8c8e87bb63f0fd8648effba210ddf082}{GetName}}().c\_str());}
\DoxyCodeLine{128 \}}
\DoxyCodeLine{129 }
\DoxyCodeLine{130 \mbox{\hyperlink{class_triangle}{Triangle}}* \mbox{\hyperlink{class_renderer_ae150d2d3f583b20e971ad60197205e36}{Renderer::ProjectTriangle}}(\mbox{\hyperlink{class_triangle}{Triangle}}* tri, \mbox{\hyperlink{class_vector3}{Vector3}}* pos, \mbox{\hyperlink{class_vector3}{Vector3}}* rot, \mbox{\hyperlink{class_camera}{Camera}}* cam, \mbox{\hyperlink{class_vector3}{Vector3}}* lightDir, \textcolor{keywordtype}{bool} projectLight) \{}
\DoxyCodeLine{131   \textcolor{comment}{//DOBIERA PamiÄ™ci!!!! Jednak nie XD Jednak tak :((((}}
\DoxyCodeLine{132   \textcolor{keyword}{static} \mbox{\hyperlink{class_matrix}{Matrix}}* projMat = \mbox{\hyperlink{class_renderer_a1aefc3c14b9db1a0a7abfb784547018e}{GetProjectionMatrix}}();}
\DoxyCodeLine{133   \textcolor{keyword}{static} \mbox{\hyperlink{class_triangle}{Triangle}} result;}
\DoxyCodeLine{134 }
\DoxyCodeLine{135   \textcolor{comment}{/* Moving object's triangle */}}
\DoxyCodeLine{136   \textcolor{keyword}{static} \mbox{\hyperlink{class_vector3}{Vector3}} movedP1;}
\DoxyCodeLine{137   \textcolor{keyword}{static} \mbox{\hyperlink{class_vector3}{Vector3}} movedP2;}
\DoxyCodeLine{138   \textcolor{keyword}{static} \mbox{\hyperlink{class_vector3}{Vector3}} movedP3;}
\DoxyCodeLine{139 }
\DoxyCodeLine{140   movedP1.\mbox{\hyperlink{class_vector3_a96424507ccf818dd9582f648c646a71a}{SetXYZ}}(tri-\/>\mbox{\hyperlink{class_triangle_a6ac054c3c4c13a19ef2f34f23b52cc1c}{GetPoint}}(0));}
\DoxyCodeLine{141   movedP2.\mbox{\hyperlink{class_vector3_a96424507ccf818dd9582f648c646a71a}{SetXYZ}}(tri-\/>\mbox{\hyperlink{class_triangle_a6ac054c3c4c13a19ef2f34f23b52cc1c}{GetPoint}}(1));}
\DoxyCodeLine{142   movedP3.\mbox{\hyperlink{class_vector3_a96424507ccf818dd9582f648c646a71a}{SetXYZ}}(tri-\/>\mbox{\hyperlink{class_triangle_a6ac054c3c4c13a19ef2f34f23b52cc1c}{GetPoint}}(2));}
\DoxyCodeLine{143 }
\DoxyCodeLine{144   \mbox{\hyperlink{class_matrix_a4d8417f15dc4e5ebad02321c9fd37e6c}{Matrix::Add}}(\&movedP1, pos);}
\DoxyCodeLine{145   \mbox{\hyperlink{class_matrix_a4d8417f15dc4e5ebad02321c9fd37e6c}{Matrix::Add}}(\&movedP2, pos);}
\DoxyCodeLine{146   \mbox{\hyperlink{class_matrix_a4d8417f15dc4e5ebad02321c9fd37e6c}{Matrix::Add}}(\&movedP3, pos);}
\DoxyCodeLine{147 }
\DoxyCodeLine{148   \textcolor{comment}{/* Normalizing object's triangle */}}
\DoxyCodeLine{149   \textcolor{keyword}{static} \mbox{\hyperlink{class_vector3}{Vector3}} normal;}
\DoxyCodeLine{150   \textcolor{keyword}{static} \mbox{\hyperlink{class_vector3}{Vector3}} line1;}
\DoxyCodeLine{151   \textcolor{keyword}{static} \mbox{\hyperlink{class_vector3}{Vector3}} line2;}
\DoxyCodeLine{152 }
\DoxyCodeLine{153   line1.\mbox{\hyperlink{class_vector3_adefc004f13762e3386de5cb557692408}{SetX}}(movedP2.\mbox{\hyperlink{class_vector3_ac489a8c1cb8c052fbfc1227cb66c64d2}{X}}() -\/ movedP1.\mbox{\hyperlink{class_vector3_ac489a8c1cb8c052fbfc1227cb66c64d2}{X}}());}
\DoxyCodeLine{154   line1.\mbox{\hyperlink{class_vector3_a84690eeeb8f94037b9103772b8bcb221}{SetY}}(movedP2.\mbox{\hyperlink{class_vector3_ada990cdc627b1eab3ee985458eefb98a}{Y}}() -\/ movedP1.\mbox{\hyperlink{class_vector3_ada990cdc627b1eab3ee985458eefb98a}{Y}}());}
\DoxyCodeLine{155   line1.\mbox{\hyperlink{class_vector3_abef4f93039c0cc4181dea08ee0fc41c2}{SetZ}}(movedP2.\mbox{\hyperlink{class_vector3_a9cee9c340fd39d7eb535f993ede6c026}{Z}}() -\/ movedP1.\mbox{\hyperlink{class_vector3_a9cee9c340fd39d7eb535f993ede6c026}{Z}}());}
\DoxyCodeLine{156 }
\DoxyCodeLine{157   line2.\mbox{\hyperlink{class_vector3_adefc004f13762e3386de5cb557692408}{SetX}}(movedP3.\mbox{\hyperlink{class_vector3_ac489a8c1cb8c052fbfc1227cb66c64d2}{X}}() -\/ movedP1.\mbox{\hyperlink{class_vector3_ac489a8c1cb8c052fbfc1227cb66c64d2}{X}}());}
\DoxyCodeLine{158   line2.\mbox{\hyperlink{class_vector3_a84690eeeb8f94037b9103772b8bcb221}{SetY}}(movedP3.\mbox{\hyperlink{class_vector3_ada990cdc627b1eab3ee985458eefb98a}{Y}}() -\/ movedP1.\mbox{\hyperlink{class_vector3_ada990cdc627b1eab3ee985458eefb98a}{Y}}());}
\DoxyCodeLine{159   line2.\mbox{\hyperlink{class_vector3_abef4f93039c0cc4181dea08ee0fc41c2}{SetZ}}(movedP3.\mbox{\hyperlink{class_vector3_a9cee9c340fd39d7eb535f993ede6c026}{Z}}() -\/ movedP1.\mbox{\hyperlink{class_vector3_a9cee9c340fd39d7eb535f993ede6c026}{Z}}());}
\DoxyCodeLine{160 }
\DoxyCodeLine{161   normal.\mbox{\hyperlink{class_vector3_adefc004f13762e3386de5cb557692408}{SetX}}(line1.\mbox{\hyperlink{class_vector3_ada990cdc627b1eab3ee985458eefb98a}{Y}}() * line2.\mbox{\hyperlink{class_vector3_a9cee9c340fd39d7eb535f993ede6c026}{Z}}() -\/ line1.\mbox{\hyperlink{class_vector3_a9cee9c340fd39d7eb535f993ede6c026}{Z}}() * line2.\mbox{\hyperlink{class_vector3_ada990cdc627b1eab3ee985458eefb98a}{Y}}());}
\DoxyCodeLine{162   normal.\mbox{\hyperlink{class_vector3_a84690eeeb8f94037b9103772b8bcb221}{SetY}}(line1.\mbox{\hyperlink{class_vector3_a9cee9c340fd39d7eb535f993ede6c026}{Z}}() * line2.\mbox{\hyperlink{class_vector3_ac489a8c1cb8c052fbfc1227cb66c64d2}{X}}() -\/ line1.\mbox{\hyperlink{class_vector3_ac489a8c1cb8c052fbfc1227cb66c64d2}{X}}() * line2.\mbox{\hyperlink{class_vector3_a9cee9c340fd39d7eb535f993ede6c026}{Z}}());}
\DoxyCodeLine{163   normal.\mbox{\hyperlink{class_vector3_abef4f93039c0cc4181dea08ee0fc41c2}{SetZ}}(line1.\mbox{\hyperlink{class_vector3_ac489a8c1cb8c052fbfc1227cb66c64d2}{X}}() * line2.\mbox{\hyperlink{class_vector3_ada990cdc627b1eab3ee985458eefb98a}{Y}}() -\/ line1.\mbox{\hyperlink{class_vector3_ada990cdc627b1eab3ee985458eefb98a}{Y}}() * line2.\mbox{\hyperlink{class_vector3_ac489a8c1cb8c052fbfc1227cb66c64d2}{X}}());}
\DoxyCodeLine{164 }
\DoxyCodeLine{165   \textcolor{keyword}{static} \textcolor{keywordtype}{double} normalLen;}
\DoxyCodeLine{166   normalLen = sqrt(normal.\mbox{\hyperlink{class_vector3_ac489a8c1cb8c052fbfc1227cb66c64d2}{X}}() * normal.\mbox{\hyperlink{class_vector3_ac489a8c1cb8c052fbfc1227cb66c64d2}{X}}() + normal.\mbox{\hyperlink{class_vector3_ada990cdc627b1eab3ee985458eefb98a}{Y}}() * normal.\mbox{\hyperlink{class_vector3_ada990cdc627b1eab3ee985458eefb98a}{Y}}() + normal.\mbox{\hyperlink{class_vector3_a9cee9c340fd39d7eb535f993ede6c026}{Z}}() * normal.\mbox{\hyperlink{class_vector3_a9cee9c340fd39d7eb535f993ede6c026}{Z}}());}
\DoxyCodeLine{167   \mbox{\hyperlink{class_matrix_a4886451fa27df3c4b4c886642ab27776}{Matrix::Divide}}(\&normal, normalLen);}
\DoxyCodeLine{168 }
\DoxyCodeLine{169   \textcolor{comment}{/* calculate dot product */}}
\DoxyCodeLine{170   \textcolor{keyword}{static} \textcolor{keywordtype}{double} dotProduct;}
\DoxyCodeLine{171   dotProduct = normal.\mbox{\hyperlink{class_vector3_ac489a8c1cb8c052fbfc1227cb66c64d2}{X}}() * (movedP1.\mbox{\hyperlink{class_vector3_ac489a8c1cb8c052fbfc1227cb66c64d2}{X}}() -\/ cam-\/>\mbox{\hyperlink{class_object_ab0945360d98dff31603571ff78acb4f7}{GetPosition}}()-\/>\mbox{\hyperlink{class_vector3_ac489a8c1cb8c052fbfc1227cb66c64d2}{X}}()) +}
\DoxyCodeLine{172                normal.\mbox{\hyperlink{class_vector3_ada990cdc627b1eab3ee985458eefb98a}{Y}}() * (movedP1.\mbox{\hyperlink{class_vector3_ada990cdc627b1eab3ee985458eefb98a}{Y}}() -\/ cam-\/>\mbox{\hyperlink{class_object_ab0945360d98dff31603571ff78acb4f7}{GetPosition}}()-\/>\mbox{\hyperlink{class_vector3_ada990cdc627b1eab3ee985458eefb98a}{Y}}()) +}
\DoxyCodeLine{173                normal.\mbox{\hyperlink{class_vector3_a9cee9c340fd39d7eb535f993ede6c026}{Z}}() * (movedP1.\mbox{\hyperlink{class_vector3_a9cee9c340fd39d7eb535f993ede6c026}{Z}}() -\/ cam-\/>\mbox{\hyperlink{class_object_ab0945360d98dff31603571ff78acb4f7}{GetPosition}}()-\/>\mbox{\hyperlink{class_vector3_a9cee9c340fd39d7eb535f993ede6c026}{Z}}());}
\DoxyCodeLine{174 }
\DoxyCodeLine{175   \textcolor{keywordflow}{if}(dotProduct < 0.0) \{}
\DoxyCodeLine{176     \textcolor{comment}{/* Illumination */}}
\DoxyCodeLine{177     \textcolor{keyword}{static} \textcolor{keywordtype}{double} lightDirNormalLen;}
\DoxyCodeLine{178     \textcolor{keyword}{static} \mbox{\hyperlink{class_vector3}{Vector3}} lightDirNormal;}
\DoxyCodeLine{179     \textcolor{keyword}{static} \textcolor{keywordtype}{double} lightDotProduct;}
\DoxyCodeLine{180 }
\DoxyCodeLine{181     \textcolor{keywordflow}{if}(projectLight) \{}
\DoxyCodeLine{182       lightDirNormal.\mbox{\hyperlink{class_vector3_a96424507ccf818dd9582f648c646a71a}{SetXYZ}}(lightDir);}
\DoxyCodeLine{183       lightDirNormalLen = sqrt(lightDir-\/>\mbox{\hyperlink{class_vector3_ac489a8c1cb8c052fbfc1227cb66c64d2}{X}}() * lightDir-\/>\mbox{\hyperlink{class_vector3_ac489a8c1cb8c052fbfc1227cb66c64d2}{X}}() + lightDir-\/>\mbox{\hyperlink{class_vector3_ada990cdc627b1eab3ee985458eefb98a}{Y}}() * lightDir-\/>\mbox{\hyperlink{class_vector3_ada990cdc627b1eab3ee985458eefb98a}{Y}}() + lightDir-\/>\mbox{\hyperlink{class_vector3_a9cee9c340fd39d7eb535f993ede6c026}{Z}}() * lightDir-\/>\mbox{\hyperlink{class_vector3_a9cee9c340fd39d7eb535f993ede6c026}{Z}}());}
\DoxyCodeLine{184       \mbox{\hyperlink{class_matrix_a4886451fa27df3c4b4c886642ab27776}{Matrix::Divide}}(\&lightDirNormal, lightDirNormalLen);}
\DoxyCodeLine{185 }
\DoxyCodeLine{186       lightDotProduct = normal.\mbox{\hyperlink{class_vector3_ac489a8c1cb8c052fbfc1227cb66c64d2}{X}}() * lightDirNormal.\mbox{\hyperlink{class_vector3_ac489a8c1cb8c052fbfc1227cb66c64d2}{X}}() + normal.\mbox{\hyperlink{class_vector3_ada990cdc627b1eab3ee985458eefb98a}{Y}}() * lightDirNormal.\mbox{\hyperlink{class_vector3_ada990cdc627b1eab3ee985458eefb98a}{Y}}() + normal.\mbox{\hyperlink{class_vector3_a9cee9c340fd39d7eb535f993ede6c026}{Z}}() * lightDirNormal.\mbox{\hyperlink{class_vector3_a9cee9c340fd39d7eb535f993ede6c026}{Z}}();}
\DoxyCodeLine{187     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{188       lightDotProduct = 1.0;}
\DoxyCodeLine{189     \}}
\DoxyCodeLine{190     \textcolor{comment}{/* Projecting object's triangle */}}
\DoxyCodeLine{191     \textcolor{keyword}{static} \mbox{\hyperlink{class_vector4}{Vector4}} extendedP1;}
\DoxyCodeLine{192     \textcolor{keyword}{static} \mbox{\hyperlink{class_vector4}{Vector4}} extendedP2;}
\DoxyCodeLine{193     \textcolor{keyword}{static} \mbox{\hyperlink{class_vector4}{Vector4}} extendedP3;}
\DoxyCodeLine{194 }
\DoxyCodeLine{195     extendedP1.\mbox{\hyperlink{class_vector4_ae96b5769ced1ab6732197b62fea0114a}{SetXYZW}}(\&movedP1, 1.0);}
\DoxyCodeLine{196     extendedP2.\mbox{\hyperlink{class_vector4_ae96b5769ced1ab6732197b62fea0114a}{SetXYZW}}(\&movedP2, 1.0);}
\DoxyCodeLine{197     extendedP3.\mbox{\hyperlink{class_vector4_ae96b5769ced1ab6732197b62fea0114a}{SetXYZW}}(\&movedP3, 1.0);}
\DoxyCodeLine{198 }
\DoxyCodeLine{199     \textcolor{keyword}{static} \mbox{\hyperlink{class_vector4}{Vector4}} outMatP1;}
\DoxyCodeLine{200     \textcolor{keyword}{static} \mbox{\hyperlink{class_vector4}{Vector4}} outMatP2;}
\DoxyCodeLine{201     \textcolor{keyword}{static} \mbox{\hyperlink{class_vector4}{Vector4}} outMatP3;}
\DoxyCodeLine{202 }
\DoxyCodeLine{203     \mbox{\hyperlink{class_matrix_ab094af0b0a93d8fa1226139476f69f17}{Matrix::Multiply}}(\&extendedP1, projMat, outMatP1);}
\DoxyCodeLine{204     \mbox{\hyperlink{class_matrix_ab094af0b0a93d8fa1226139476f69f17}{Matrix::Multiply}}(\&extendedP2, projMat, outMatP2);}
\DoxyCodeLine{205     \mbox{\hyperlink{class_matrix_ab094af0b0a93d8fa1226139476f69f17}{Matrix::Multiply}}(\&extendedP3, projMat, outMatP3);}
\DoxyCodeLine{206 }
\DoxyCodeLine{207     \textcolor{keyword}{static} \mbox{\hyperlink{class_vector3}{Vector3}} projectedP1;}
\DoxyCodeLine{208     \textcolor{keyword}{static} \mbox{\hyperlink{class_vector3}{Vector3}} projectedP2;}
\DoxyCodeLine{209     \textcolor{keyword}{static} \mbox{\hyperlink{class_vector3}{Vector3}} projectedP3;}
\DoxyCodeLine{210 }
\DoxyCodeLine{211     projectedP1.\mbox{\hyperlink{class_vector3_a96424507ccf818dd9582f648c646a71a}{SetXYZ}}(outMatP1.\mbox{\hyperlink{class_matrix_a729ff19a49e3661c9da642d9b619b4ad}{GetValue}}(0,0), outMatP1.\mbox{\hyperlink{class_matrix_a729ff19a49e3661c9da642d9b619b4ad}{GetValue}}(0,1), outMatP1.\mbox{\hyperlink{class_matrix_a729ff19a49e3661c9da642d9b619b4ad}{GetValue}}(0,2));}
\DoxyCodeLine{212     projectedP2.\mbox{\hyperlink{class_vector3_a96424507ccf818dd9582f648c646a71a}{SetXYZ}}(outMatP2.\mbox{\hyperlink{class_matrix_a729ff19a49e3661c9da642d9b619b4ad}{GetValue}}(0,0), outMatP2.\mbox{\hyperlink{class_matrix_a729ff19a49e3661c9da642d9b619b4ad}{GetValue}}(0,1), outMatP2.\mbox{\hyperlink{class_matrix_a729ff19a49e3661c9da642d9b619b4ad}{GetValue}}(0,2));}
\DoxyCodeLine{213     projectedP3.\mbox{\hyperlink{class_vector3_a96424507ccf818dd9582f648c646a71a}{SetXYZ}}(outMatP3.\mbox{\hyperlink{class_matrix_a729ff19a49e3661c9da642d9b619b4ad}{GetValue}}(0,0), outMatP3.\mbox{\hyperlink{class_matrix_a729ff19a49e3661c9da642d9b619b4ad}{GetValue}}(0,1), outMatP3.\mbox{\hyperlink{class_matrix_a729ff19a49e3661c9da642d9b619b4ad}{GetValue}}(0,2));}
\DoxyCodeLine{214 }
\DoxyCodeLine{215     \textcolor{comment}{/* Scaling object's triangle to world space */}}
\DoxyCodeLine{216     \mbox{\hyperlink{class_matrix_a4886451fa27df3c4b4c886642ab27776}{Matrix::Divide}}(\&projectedP1, outMatP1.\mbox{\hyperlink{class_matrix_a729ff19a49e3661c9da642d9b619b4ad}{GetValue}}(0,3));}
\DoxyCodeLine{217     \mbox{\hyperlink{class_matrix_a4886451fa27df3c4b4c886642ab27776}{Matrix::Divide}}(\&projectedP2, outMatP2.\mbox{\hyperlink{class_matrix_a729ff19a49e3661c9da642d9b619b4ad}{GetValue}}(0,3));}
\DoxyCodeLine{218     \mbox{\hyperlink{class_matrix_a4886451fa27df3c4b4c886642ab27776}{Matrix::Divide}}(\&projectedP3, outMatP3.\mbox{\hyperlink{class_matrix_a729ff19a49e3661c9da642d9b619b4ad}{GetValue}}(0,3));}
\DoxyCodeLine{219 }
\DoxyCodeLine{220     \mbox{\hyperlink{class_matrix_a4d8417f15dc4e5ebad02321c9fd37e6c}{Matrix::Add}}(\&projectedP1, 1);}
\DoxyCodeLine{221     \mbox{\hyperlink{class_matrix_a4d8417f15dc4e5ebad02321c9fd37e6c}{Matrix::Add}}(\&projectedP2, 1);}
\DoxyCodeLine{222     \mbox{\hyperlink{class_matrix_a4d8417f15dc4e5ebad02321c9fd37e6c}{Matrix::Add}}(\&projectedP3, 1);}
\DoxyCodeLine{223 }
\DoxyCodeLine{224     \mbox{\hyperlink{class_matrix_ab094af0b0a93d8fa1226139476f69f17}{Matrix::Multiply}}(\&projectedP1, 0.5);}
\DoxyCodeLine{225     \mbox{\hyperlink{class_matrix_ab094af0b0a93d8fa1226139476f69f17}{Matrix::Multiply}}(\&projectedP2, 0.5);}
\DoxyCodeLine{226     \mbox{\hyperlink{class_matrix_ab094af0b0a93d8fa1226139476f69f17}{Matrix::Multiply}}(\&projectedP3, 0.5);}
\DoxyCodeLine{227 }
\DoxyCodeLine{228     projectedP1.\mbox{\hyperlink{class_vector3_adefc004f13762e3386de5cb557692408}{SetX}}(projectedP1.\mbox{\hyperlink{class_vector3_ac489a8c1cb8c052fbfc1227cb66c64d2}{X}}() * \mbox{\hyperlink{class_renderer_wrapper_ad3b4ab35df9e2f56d31120230ce65660}{Width}}()); projectedP1.\mbox{\hyperlink{class_vector3_a84690eeeb8f94037b9103772b8bcb221}{SetY}}(projectedP1.\mbox{\hyperlink{class_vector3_ada990cdc627b1eab3ee985458eefb98a}{Y}}() * \mbox{\hyperlink{class_renderer_wrapper_abdb9eb22477d2b5680091b84145bacd9}{Height}}());}
\DoxyCodeLine{229     projectedP2.\mbox{\hyperlink{class_vector3_adefc004f13762e3386de5cb557692408}{SetX}}(projectedP2.\mbox{\hyperlink{class_vector3_ac489a8c1cb8c052fbfc1227cb66c64d2}{X}}() * \mbox{\hyperlink{class_renderer_wrapper_ad3b4ab35df9e2f56d31120230ce65660}{Width}}()); projectedP2.\mbox{\hyperlink{class_vector3_a84690eeeb8f94037b9103772b8bcb221}{SetY}}(projectedP2.\mbox{\hyperlink{class_vector3_ada990cdc627b1eab3ee985458eefb98a}{Y}}() * \mbox{\hyperlink{class_renderer_wrapper_abdb9eb22477d2b5680091b84145bacd9}{Height}}());}
\DoxyCodeLine{230     projectedP3.\mbox{\hyperlink{class_vector3_adefc004f13762e3386de5cb557692408}{SetX}}(projectedP3.\mbox{\hyperlink{class_vector3_ac489a8c1cb8c052fbfc1227cb66c64d2}{X}}() * \mbox{\hyperlink{class_renderer_wrapper_ad3b4ab35df9e2f56d31120230ce65660}{Width}}()); projectedP3.\mbox{\hyperlink{class_vector3_a84690eeeb8f94037b9103772b8bcb221}{SetY}}(projectedP3.\mbox{\hyperlink{class_vector3_ada990cdc627b1eab3ee985458eefb98a}{Y}}() * \mbox{\hyperlink{class_renderer_wrapper_abdb9eb22477d2b5680091b84145bacd9}{Height}}());}
\DoxyCodeLine{231 }
\DoxyCodeLine{232     result.\mbox{\hyperlink{class_triangle_a01d55a4d18956260b842ddc4c580b26e}{SetPoints}}(projectedP1.\mbox{\hyperlink{class_vector3_ac489a8c1cb8c052fbfc1227cb66c64d2}{X}}(), projectedP1.\mbox{\hyperlink{class_vector3_ada990cdc627b1eab3ee985458eefb98a}{Y}}(), projectedP1.\mbox{\hyperlink{class_vector3_a9cee9c340fd39d7eb535f993ede6c026}{Z}}(), projectedP2.\mbox{\hyperlink{class_vector3_ac489a8c1cb8c052fbfc1227cb66c64d2}{X}}(), projectedP2.\mbox{\hyperlink{class_vector3_ada990cdc627b1eab3ee985458eefb98a}{Y}}(), projectedP2.\mbox{\hyperlink{class_vector3_a9cee9c340fd39d7eb535f993ede6c026}{Z}}(), projectedP3.\mbox{\hyperlink{class_vector3_ac489a8c1cb8c052fbfc1227cb66c64d2}{X}}(), projectedP3.\mbox{\hyperlink{class_vector3_ada990cdc627b1eab3ee985458eefb98a}{Y}}(), projectedP3.\mbox{\hyperlink{class_vector3_a9cee9c340fd39d7eb535f993ede6c026}{Z}}());}
\DoxyCodeLine{233     \mbox{\hyperlink{class_renderer_wrapper_ae38eae28dbbd7a9a6ab621040fc88101}{DrawFilledTri}}(result.\mbox{\hyperlink{class_triangle_a6ac054c3c4c13a19ef2f34f23b52cc1c}{GetPoint}}(0)-\/>\mbox{\hyperlink{class_vector3_ac489a8c1cb8c052fbfc1227cb66c64d2}{X}}(), result.\mbox{\hyperlink{class_triangle_a6ac054c3c4c13a19ef2f34f23b52cc1c}{GetPoint}}(0)-\/>\mbox{\hyperlink{class_vector3_ada990cdc627b1eab3ee985458eefb98a}{Y}}(), result.\mbox{\hyperlink{class_triangle_a6ac054c3c4c13a19ef2f34f23b52cc1c}{GetPoint}}(1)-\/>\mbox{\hyperlink{class_vector3_ac489a8c1cb8c052fbfc1227cb66c64d2}{X}}(), result.\mbox{\hyperlink{class_triangle_a6ac054c3c4c13a19ef2f34f23b52cc1c}{GetPoint}}(1)-\/>\mbox{\hyperlink{class_vector3_ada990cdc627b1eab3ee985458eefb98a}{Y}}(), result.\mbox{\hyperlink{class_triangle_a6ac054c3c4c13a19ef2f34f23b52cc1c}{GetPoint}}(2)-\/>\mbox{\hyperlink{class_vector3_ac489a8c1cb8c052fbfc1227cb66c64d2}{X}}(), result.\mbox{\hyperlink{class_triangle_a6ac054c3c4c13a19ef2f34f23b52cc1c}{GetPoint}}(2)-\/>\mbox{\hyperlink{class_vector3_ada990cdc627b1eab3ee985458eefb98a}{Y}}(), (uint8\_t)(lightDotProduct*255), (uint8\_t)(lightDotProduct*255), (uint8\_t)(lightDotProduct*255));}
\DoxyCodeLine{234   \}}
\DoxyCodeLine{235   \textcolor{keywordflow}{return} \&result;}
\DoxyCodeLine{236 \}}
\DoxyCodeLine{237 }
\DoxyCodeLine{238 \textcolor{keyword}{inline} \mbox{\hyperlink{class_matrix}{Matrix}}* \mbox{\hyperlink{class_renderer_a1aefc3c14b9db1a0a7abfb784547018e}{Renderer::GetProjectionMatrix}}() \{ \textcolor{keywordflow}{return} projMatrix; \}}
\DoxyCodeLine{239 }
\DoxyCodeLine{240 \textcolor{keywordtype}{void} \mbox{\hyperlink{class_renderer_a97146506b00259301115bec677ab29e6}{Renderer::RecalculateProjectionMatrix}}(\mbox{\hyperlink{class_camera}{Camera}}* cam) \{}
\DoxyCodeLine{241   \textcolor{keywordtype}{double} q = cam-\/>\mbox{\hyperlink{class_camera_a47d7606590fc2ab2e971fe2f62d32ab6}{GetFFar}}() / (cam-\/>\mbox{\hyperlink{class_camera_a47d7606590fc2ab2e971fe2f62d32ab6}{GetFFar}}() -\/ cam-\/>\mbox{\hyperlink{class_camera_a561a0090c008881dd66d3aafc0b1f846}{GetFNear}}());}
\DoxyCodeLine{242   projMatrix-\/>\mbox{\hyperlink{class_matrix_a07a578a33e3d05ab109e35c32f062966}{PutValue}}(0, 0, aspectRatio * cam-\/>\mbox{\hyperlink{class_camera_a062b41dec9ba3a28d2c62a46df1c5dc2}{GetFFovRad}}());}
\DoxyCodeLine{243   projMatrix-\/>\mbox{\hyperlink{class_matrix_a07a578a33e3d05ab109e35c32f062966}{PutValue}}(1, 1, cam-\/>\mbox{\hyperlink{class_camera_a062b41dec9ba3a28d2c62a46df1c5dc2}{GetFFovRad}}());}
\DoxyCodeLine{244   projMatrix-\/>\mbox{\hyperlink{class_matrix_a07a578a33e3d05ab109e35c32f062966}{PutValue}}(2, 2, q);}
\DoxyCodeLine{245   projMatrix-\/>\mbox{\hyperlink{class_matrix_a07a578a33e3d05ab109e35c32f062966}{PutValue}}(2, 3, 1.0);}
\DoxyCodeLine{246   projMatrix-\/>\mbox{\hyperlink{class_matrix_a07a578a33e3d05ab109e35c32f062966}{PutValue}}(3, 2, -\/cam-\/>\mbox{\hyperlink{class_camera_a561a0090c008881dd66d3aafc0b1f846}{GetFNear}}() * q);}
\DoxyCodeLine{247   \mbox{\hyperlink{class_logger_aae69f0478dbd5d719e70a8af3b154761}{Logger::Info}}(projMatrix-\/>\mbox{\hyperlink{class_matrix_af40af6f88268cbe1850617269d1f80e2}{ToString}}().c\_str());}
\DoxyCodeLine{248 \}}
\DoxyCodeLine{249 }
\DoxyCodeLine{250 }
\DoxyCodeLine{251 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* \_RENDERER\_HPP\_ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
