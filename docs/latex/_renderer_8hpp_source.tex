\hypertarget{_renderer_8hpp_source}{}\doxysection{Renderer.\+hpp}
\label{_renderer_8hpp_source}\index{/Users/karolborecki/Desktop/CrustEngine/CrustEngine/Inc/Rendering/Renderer.hpp@{/Users/karolborecki/Desktop/CrustEngine/CrustEngine/Inc/Rendering/Renderer.hpp}}
\mbox{\hyperlink{_renderer_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef \_RENDERER\_HPP\_}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define \_RENDERER\_HPP\_}}
\DoxyCodeLine{3 }
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_matrix_8hpp}{Math/Matrix.hpp}}>}}
\DoxyCodeLine{5 }
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_camera_8hpp}{Core/Camera.hpp}}>}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_renderer_wrapper_8hpp}{Rendering/RendererWrapper.hpp}}>}}
\DoxyCodeLine{9 }
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_vector3_8hpp}{Math/Vector3.hpp}}>}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_vector4_8hpp}{Math/Vector4.hpp}}>}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_triangle_8hpp}{Math/Triangle.hpp}}>}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{_render_object_8hpp}{Rendering/Objects/RenderObject.hpp}}>}}
\DoxyCodeLine{14 }
\DoxyCodeLine{24 \textcolor{keyword}{class }\mbox{\hyperlink{class_renderer}{Renderer}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_renderer_wrapper}{RendererWrapper}}}
\DoxyCodeLine{25 \{}
\DoxyCodeLine{26 \textcolor{keyword}{public}:}
\DoxyCodeLine{35   \mbox{\hyperlink{class_renderer}{Renderer}}(uint32\_t \_width, uint32\_t \_height);}
\DoxyCodeLine{39   \mbox{\hyperlink{class_renderer_afeee408862d5bd6255a6882d47e6d5cd}{\string~Renderer}}();}
\DoxyCodeLine{40 }
\DoxyCodeLine{48   \textcolor{keywordtype}{void} \mbox{\hyperlink{class_renderer_ae9b3f37e9a69fab19cf270ca7521de21}{DrawPolygon}}(\mbox{\hyperlink{class_polygon}{Polygon}} \&poli);}
\DoxyCodeLine{49 }
\DoxyCodeLine{66   \textcolor{keywordtype}{void} \mbox{\hyperlink{class_renderer_a8bc45180e9b61bd40b25a367c9588efb}{DrawMesh}}(\mbox{\hyperlink{class_mesh}{Mesh}} \&mesh, \mbox{\hyperlink{class_vector3}{Vector3}} \&pos, \mbox{\hyperlink{class_vector3}{Vector3}} \&rot, \mbox{\hyperlink{class_camera}{Camera}} \&cam, \mbox{\hyperlink{class_vector3}{Vector3}} \&lightDir, \textcolor{keywordtype}{bool} projectLight);}
\DoxyCodeLine{67 }
\DoxyCodeLine{81   \mbox{\hyperlink{class_polygon}{Polygon}} \&\mbox{\hyperlink{class_renderer_a6f49c78d6f264c76a6478813c55f3bb2}{ProjectPolygon}}(\mbox{\hyperlink{class_polygon}{Polygon}} \&poli, \mbox{\hyperlink{class_vector3}{Vector3}} \&pos, \mbox{\hyperlink{class_vector3}{Vector3}} \&rot, \mbox{\hyperlink{class_camera}{Camera}} \&cam, \mbox{\hyperlink{class_vector3}{Vector3}} \&lightDir, \textcolor{keywordtype}{bool} projectLight);}
\DoxyCodeLine{82 }
\DoxyCodeLine{88   \mbox{\hyperlink{class_matrix}{Matrix<double>}} \&\mbox{\hyperlink{class_renderer_a9c8160c634360c83d3a5d31653c15f6e}{GetProjectionMatrix}}() \textcolor{keyword}{const};}
\DoxyCodeLine{89 }
\DoxyCodeLine{101   \textcolor{keywordtype}{void} \mbox{\hyperlink{class_renderer_acf73586e7e50e21034aecc3954d88d8e}{RecalculateProjectionMatrix}}(\mbox{\hyperlink{class_camera}{Camera}} \&cam);}
\DoxyCodeLine{102 }
\DoxyCodeLine{103   \textcolor{comment}{/* This value should not be changed without full understanding of this change! */}}
\DoxyCodeLine{104   \textcolor{keyword}{static} \textcolor{keyword}{constexpr} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_renderer_a6abcaa726ad275908c817f4592760fda}{PROJ\_MATRIX\_SIZE}}\{4\}; }
\DoxyCodeLine{105 }
\DoxyCodeLine{106 \textcolor{keyword}{private}:}
\DoxyCodeLine{107   \textcolor{keywordtype}{double} aspectRatio\{0.0\};    }
\DoxyCodeLine{108   \mbox{\hyperlink{class_matrix}{Matrix<double>}} *projMatrix; }
\DoxyCodeLine{109 \};}
\DoxyCodeLine{110 }
\DoxyCodeLine{111 \mbox{\hyperlink{class_renderer_a617f76dcdd347cf5f8dea3d0d05fd6de}{Renderer::Renderer}}(uint32\_t \_width, uint32\_t \_height) : \mbox{\hyperlink{class_renderer_wrapper}{RendererWrapper}}(\_width, \_height)}
\DoxyCodeLine{112 \{}
\DoxyCodeLine{113   aspectRatio = ((double)\_height / (\textcolor{keywordtype}{double})\_width);}
\DoxyCodeLine{114   projMatrix = \textcolor{keyword}{new} \mbox{\hyperlink{class_matrix}{Matrix<double>}}(\mbox{\hyperlink{class_renderer_a6abcaa726ad275908c817f4592760fda}{PROJ\_MATRIX\_SIZE}}, \mbox{\hyperlink{class_renderer_a6abcaa726ad275908c817f4592760fda}{PROJ\_MATRIX\_SIZE}}, 0.0);}
\DoxyCodeLine{115 \}}
\DoxyCodeLine{116 }
\DoxyCodeLine{117 \mbox{\hyperlink{class_renderer_afeee408862d5bd6255a6882d47e6d5cd}{Renderer::\string~Renderer}}()}
\DoxyCodeLine{118 \{}
\DoxyCodeLine{119   \textcolor{keywordflow}{if} (projMatrix == \textcolor{keyword}{nullptr})}
\DoxyCodeLine{120     \textcolor{keywordflow}{return};}
\DoxyCodeLine{121   \textcolor{keyword}{delete} projMatrix;}
\DoxyCodeLine{122 \}}
\DoxyCodeLine{123 }
\DoxyCodeLine{124 \textcolor{keywordtype}{void} \mbox{\hyperlink{class_renderer_a8bc45180e9b61bd40b25a367c9588efb}{Renderer::DrawMesh}}(\mbox{\hyperlink{class_mesh}{Mesh}} \&mesh, \mbox{\hyperlink{class_vector3}{Vector3}} \&pos, \mbox{\hyperlink{class_vector3}{Vector3}} \&rot, \mbox{\hyperlink{class_camera}{Camera}} \&cam, \mbox{\hyperlink{class_vector3}{Vector3}} \&lightDir, \textcolor{keywordtype}{bool} projectLight)}
\DoxyCodeLine{125 \{}
\DoxyCodeLine{126   \mbox{\hyperlink{class_renderer_wrapper_ac938fcb512c2197639e528cae8e294c4}{SetDrawColor}}(\mbox{\hyperlink{class_renderer_wrapper_a9a3cfe775f88bf5b58b293618c1fe8ceaf52bf2a736093a3b4ae6c3a99fcc1269}{RendererWrapper::RendererColor::WHITE}});}
\DoxyCodeLine{127   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < mesh.\mbox{\hyperlink{class_mesh_a3f4161e575431590bae285e2b050194c}{GetPolygonsCount}}(); i++) \textcolor{comment}{// TODO use auto for}}
\DoxyCodeLine{128   \{}
\DoxyCodeLine{129     \mbox{\hyperlink{class_renderer_a6f49c78d6f264c76a6478813c55f3bb2}{ProjectPolygon}}(mesh.\mbox{\hyperlink{class_mesh_a1b150426b4b41b61f5ea8e99d9d704a3}{GetPolygon}}(i), pos, rot, cam, lightDir, projectLight);}
\DoxyCodeLine{130   \}}
\DoxyCodeLine{131 \}}
\DoxyCodeLine{132 }
\DoxyCodeLine{133 \textcolor{comment}{// TODO divide!!!!}}
\DoxyCodeLine{134 \mbox{\hyperlink{class_polygon}{Polygon}} \&\mbox{\hyperlink{class_renderer_a6f49c78d6f264c76a6478813c55f3bb2}{Renderer::ProjectPolygon}}(\mbox{\hyperlink{class_polygon}{Polygon}} \&poli, \mbox{\hyperlink{class_vector3}{Vector3}} \&pos, \mbox{\hyperlink{class_vector3}{Vector3}} \&rot, \mbox{\hyperlink{class_camera}{Camera}} \&cam, \mbox{\hyperlink{class_vector3}{Vector3}} \&lightDir, \textcolor{keywordtype}{bool} projectLight)}
\DoxyCodeLine{135 \{}
\DoxyCodeLine{136   \textcolor{keyword}{static} \mbox{\hyperlink{class_matrix}{Matrix<double>}} projMat;}
\DoxyCodeLine{137   projMat = \mbox{\hyperlink{class_renderer_a9c8160c634360c83d3a5d31653c15f6e}{GetProjectionMatrix}}();}
\DoxyCodeLine{138   \textcolor{keyword}{static} \mbox{\hyperlink{class_polygon}{Polygon}} result;}
\DoxyCodeLine{139 }
\DoxyCodeLine{140   \textcolor{comment}{/* Moving object's triangle */}}
\DoxyCodeLine{141   \textcolor{keyword}{static} \mbox{\hyperlink{class_vector3}{Vector3}} movedP1;}
\DoxyCodeLine{142   \textcolor{keyword}{static} \mbox{\hyperlink{class_vector3}{Vector3}} movedP2;}
\DoxyCodeLine{143   \textcolor{keyword}{static} \mbox{\hyperlink{class_vector3}{Vector3}} movedP3;}
\DoxyCodeLine{144 }
\DoxyCodeLine{145   movedP1 = poli.\mbox{\hyperlink{class_triangle_a8e4c246a9a54572c9dc197856d9f7659}{GetPoint}}(0);}
\DoxyCodeLine{146   movedP2 = poli.\mbox{\hyperlink{class_triangle_a8e4c246a9a54572c9dc197856d9f7659}{GetPoint}}(1);}
\DoxyCodeLine{147   movedP3 = poli.\mbox{\hyperlink{class_triangle_a8e4c246a9a54572c9dc197856d9f7659}{GetPoint}}(2);}
\DoxyCodeLine{148 }
\DoxyCodeLine{149   movedP1 += pos;}
\DoxyCodeLine{150   movedP2 += pos;}
\DoxyCodeLine{151   movedP3 += pos;}
\DoxyCodeLine{152 }
\DoxyCodeLine{153   movedP1 -\/= cam.\mbox{\hyperlink{class_object_a26a44aa385f80433e92ce2cee5c36b3b}{GetTransform}}().\mbox{\hyperlink{class_transform_abbbbd89160c4be2736176b4d59b68823}{GetPosition}}(); \textcolor{comment}{// TODO move to local variable}}
\DoxyCodeLine{154   movedP2 -\/= cam.\mbox{\hyperlink{class_object_a26a44aa385f80433e92ce2cee5c36b3b}{GetTransform}}().\mbox{\hyperlink{class_transform_abbbbd89160c4be2736176b4d59b68823}{GetPosition}}();}
\DoxyCodeLine{155   movedP3 -\/= cam.\mbox{\hyperlink{class_object_a26a44aa385f80433e92ce2cee5c36b3b}{GetTransform}}().\mbox{\hyperlink{class_transform_abbbbd89160c4be2736176b4d59b68823}{GetPosition}}();}
\DoxyCodeLine{156 }
\DoxyCodeLine{157   \textcolor{comment}{/* Normalizing object's triangle */}}
\DoxyCodeLine{158   \textcolor{keyword}{static} \mbox{\hyperlink{class_vector3}{Vector3}} normal;}
\DoxyCodeLine{159   \textcolor{keyword}{static} \mbox{\hyperlink{class_vector3}{Vector3}} line1;}
\DoxyCodeLine{160   \textcolor{keyword}{static} \mbox{\hyperlink{class_vector3}{Vector3}} line2;}
\DoxyCodeLine{161 }
\DoxyCodeLine{162   line1 = movedP2;}
\DoxyCodeLine{163   line1 -\/= movedP1;}
\DoxyCodeLine{164 }
\DoxyCodeLine{165   line2 = movedP3;}
\DoxyCodeLine{166   line2 -\/= movedP1;}
\DoxyCodeLine{167 }
\DoxyCodeLine{168   normal.\mbox{\hyperlink{class_vector3_adefc004f13762e3386de5cb557692408}{SetX}}(line1.\mbox{\hyperlink{class_vector3_a4cdf9e8af601508983635de175ebac65}{Y}}() * line2.\mbox{\hyperlink{class_vector3_a44d26a20339d2a17c3002001bf57174b}{Z}}() -\/ line1.\mbox{\hyperlink{class_vector3_a44d26a20339d2a17c3002001bf57174b}{Z}}() * line2.\mbox{\hyperlink{class_vector3_a4cdf9e8af601508983635de175ebac65}{Y}}());}
\DoxyCodeLine{169   normal.\mbox{\hyperlink{class_vector3_a84690eeeb8f94037b9103772b8bcb221}{SetY}}(line1.\mbox{\hyperlink{class_vector3_a44d26a20339d2a17c3002001bf57174b}{Z}}() * line2.\mbox{\hyperlink{class_vector3_a6c9e1b2da59154c65bac9f1e2ca92932}{X}}() -\/ line1.\mbox{\hyperlink{class_vector3_a6c9e1b2da59154c65bac9f1e2ca92932}{X}}() * line2.\mbox{\hyperlink{class_vector3_a44d26a20339d2a17c3002001bf57174b}{Z}}());}
\DoxyCodeLine{170   normal.\mbox{\hyperlink{class_vector3_abef4f93039c0cc4181dea08ee0fc41c2}{SetZ}}(line1.\mbox{\hyperlink{class_vector3_a6c9e1b2da59154c65bac9f1e2ca92932}{X}}() * line2.\mbox{\hyperlink{class_vector3_a4cdf9e8af601508983635de175ebac65}{Y}}() -\/ line1.\mbox{\hyperlink{class_vector3_a4cdf9e8af601508983635de175ebac65}{Y}}() * line2.\mbox{\hyperlink{class_vector3_a6c9e1b2da59154c65bac9f1e2ca92932}{X}}());}
\DoxyCodeLine{171 }
\DoxyCodeLine{172   \textcolor{keyword}{static} \textcolor{keywordtype}{double} normalLen;}
\DoxyCodeLine{173   normalLen = \mbox{\hyperlink{class_math_ab29df732d1fd8bf452a1570b9866f61f}{Math::SquareRoot}}(normal.\mbox{\hyperlink{class_vector3_a6c9e1b2da59154c65bac9f1e2ca92932}{X}}() * normal.\mbox{\hyperlink{class_vector3_a6c9e1b2da59154c65bac9f1e2ca92932}{X}}() + normal.\mbox{\hyperlink{class_vector3_a4cdf9e8af601508983635de175ebac65}{Y}}() * normal.\mbox{\hyperlink{class_vector3_a4cdf9e8af601508983635de175ebac65}{Y}}() + normal.\mbox{\hyperlink{class_vector3_a44d26a20339d2a17c3002001bf57174b}{Z}}() * normal.\mbox{\hyperlink{class_vector3_a44d26a20339d2a17c3002001bf57174b}{Z}}());}
\DoxyCodeLine{174   normal /= normalLen;}
\DoxyCodeLine{175 }
\DoxyCodeLine{176   \textcolor{comment}{/* calculate dot product */}}
\DoxyCodeLine{177   \textcolor{keyword}{static} \textcolor{keywordtype}{double} dotProduct;}
\DoxyCodeLine{178   dotProduct = normal.\mbox{\hyperlink{class_vector3_a6c9e1b2da59154c65bac9f1e2ca92932}{X}}() * (movedP1.\mbox{\hyperlink{class_vector3_a6c9e1b2da59154c65bac9f1e2ca92932}{X}}() -\/ cam.\mbox{\hyperlink{class_object_a26a44aa385f80433e92ce2cee5c36b3b}{GetTransform}}().\mbox{\hyperlink{class_transform_abbbbd89160c4be2736176b4d59b68823}{GetPosition}}().\mbox{\hyperlink{class_vector3_a6c9e1b2da59154c65bac9f1e2ca92932}{X}}()) +}
\DoxyCodeLine{179                normal.\mbox{\hyperlink{class_vector3_a4cdf9e8af601508983635de175ebac65}{Y}}() * (movedP1.\mbox{\hyperlink{class_vector3_a4cdf9e8af601508983635de175ebac65}{Y}}() -\/ cam.\mbox{\hyperlink{class_object_a26a44aa385f80433e92ce2cee5c36b3b}{GetTransform}}().\mbox{\hyperlink{class_transform_abbbbd89160c4be2736176b4d59b68823}{GetPosition}}().\mbox{\hyperlink{class_vector3_a4cdf9e8af601508983635de175ebac65}{Y}}()) +}
\DoxyCodeLine{180                normal.\mbox{\hyperlink{class_vector3_a44d26a20339d2a17c3002001bf57174b}{Z}}() * (movedP1.\mbox{\hyperlink{class_vector3_a44d26a20339d2a17c3002001bf57174b}{Z}}() -\/ cam.\mbox{\hyperlink{class_object_a26a44aa385f80433e92ce2cee5c36b3b}{GetTransform}}().\mbox{\hyperlink{class_transform_abbbbd89160c4be2736176b4d59b68823}{GetPosition}}().\mbox{\hyperlink{class_vector3_a44d26a20339d2a17c3002001bf57174b}{Z}}());}
\DoxyCodeLine{181 }
\DoxyCodeLine{182   \textcolor{keywordflow}{if} (dotProduct < 0.0)}
\DoxyCodeLine{183   \{}
\DoxyCodeLine{184     \textcolor{comment}{/* Illumination */}}
\DoxyCodeLine{185     \textcolor{keyword}{static} \textcolor{keywordtype}{double} lightDirNormalLen;}
\DoxyCodeLine{186     \textcolor{keyword}{static} \mbox{\hyperlink{class_vector3}{Vector3}} lightDirNormal;}
\DoxyCodeLine{187     \textcolor{keyword}{static} \textcolor{keywordtype}{double} lightDotProduct;}
\DoxyCodeLine{188 }
\DoxyCodeLine{189     \textcolor{keywordflow}{if} (projectLight)}
\DoxyCodeLine{190     \{}
\DoxyCodeLine{191       lightDirNormal = lightDir;}
\DoxyCodeLine{192       lightDirNormalLen = \mbox{\hyperlink{class_math_ab29df732d1fd8bf452a1570b9866f61f}{Math::SquareRoot}}(lightDir.\mbox{\hyperlink{class_vector3_a6c9e1b2da59154c65bac9f1e2ca92932}{X}}() * lightDir.\mbox{\hyperlink{class_vector3_a6c9e1b2da59154c65bac9f1e2ca92932}{X}}() + lightDir.\mbox{\hyperlink{class_vector3_a4cdf9e8af601508983635de175ebac65}{Y}}() * lightDir.\mbox{\hyperlink{class_vector3_a4cdf9e8af601508983635de175ebac65}{Y}}() + lightDir.\mbox{\hyperlink{class_vector3_a44d26a20339d2a17c3002001bf57174b}{Z}}() * lightDir.\mbox{\hyperlink{class_vector3_a44d26a20339d2a17c3002001bf57174b}{Z}}());}
\DoxyCodeLine{193       lightDirNormal /= lightDirNormalLen;}
\DoxyCodeLine{194 }
\DoxyCodeLine{195       lightDotProduct = normal.\mbox{\hyperlink{class_vector3_a6c9e1b2da59154c65bac9f1e2ca92932}{X}}() * lightDirNormal.\mbox{\hyperlink{class_vector3_a6c9e1b2da59154c65bac9f1e2ca92932}{X}}() + normal.\mbox{\hyperlink{class_vector3_a4cdf9e8af601508983635de175ebac65}{Y}}() * lightDirNormal.\mbox{\hyperlink{class_vector3_a4cdf9e8af601508983635de175ebac65}{Y}}() + normal.\mbox{\hyperlink{class_vector3_a44d26a20339d2a17c3002001bf57174b}{Z}}() * lightDirNormal.\mbox{\hyperlink{class_vector3_a44d26a20339d2a17c3002001bf57174b}{Z}}();}
\DoxyCodeLine{196     \}}
\DoxyCodeLine{197     \textcolor{keywordflow}{else}}
\DoxyCodeLine{198     \{}
\DoxyCodeLine{199       lightDotProduct = 1.0;}
\DoxyCodeLine{200     \}}
\DoxyCodeLine{201 }
\DoxyCodeLine{202     \textcolor{comment}{/* Projecting object's triangle */}}
\DoxyCodeLine{203     \textcolor{keyword}{static} \mbox{\hyperlink{class_vector4}{Vector4}} extendedP1;}
\DoxyCodeLine{204     \textcolor{keyword}{static} \mbox{\hyperlink{class_vector4}{Vector4}} extendedP2;}
\DoxyCodeLine{205     \textcolor{keyword}{static} \mbox{\hyperlink{class_vector4}{Vector4}} extendedP3;}
\DoxyCodeLine{206 }
\DoxyCodeLine{207     extendedP1 = \{movedP1.\mbox{\hyperlink{class_vector3_a6c9e1b2da59154c65bac9f1e2ca92932}{X}}(), movedP1.\mbox{\hyperlink{class_vector3_a4cdf9e8af601508983635de175ebac65}{Y}}(), movedP1.\mbox{\hyperlink{class_vector3_a44d26a20339d2a17c3002001bf57174b}{Z}}(), 1.0\};}
\DoxyCodeLine{208     extendedP2 = \{movedP2.\mbox{\hyperlink{class_vector3_a6c9e1b2da59154c65bac9f1e2ca92932}{X}}(), movedP2.\mbox{\hyperlink{class_vector3_a4cdf9e8af601508983635de175ebac65}{Y}}(), movedP2.\mbox{\hyperlink{class_vector3_a44d26a20339d2a17c3002001bf57174b}{Z}}(), 1.0\};}
\DoxyCodeLine{209     extendedP3 = \{movedP3.\mbox{\hyperlink{class_vector3_a6c9e1b2da59154c65bac9f1e2ca92932}{X}}(), movedP3.\mbox{\hyperlink{class_vector3_a4cdf9e8af601508983635de175ebac65}{Y}}(), movedP3.\mbox{\hyperlink{class_vector3_a44d26a20339d2a17c3002001bf57174b}{Z}}(), 1.0\};}
\DoxyCodeLine{210 }
\DoxyCodeLine{211     extendedP1 *= projMat; \textcolor{comment}{// Wynik tego mnozenia jest zly}}
\DoxyCodeLine{212     extendedP2 *= projMat;}
\DoxyCodeLine{213     extendedP3 *= projMat;}
\DoxyCodeLine{214 }
\DoxyCodeLine{215     \textcolor{keyword}{static} \mbox{\hyperlink{class_vector3}{Vector3}} projectedP1;}
\DoxyCodeLine{216     \textcolor{keyword}{static} \mbox{\hyperlink{class_vector3}{Vector3}} projectedP2;}
\DoxyCodeLine{217     \textcolor{keyword}{static} \mbox{\hyperlink{class_vector3}{Vector3}} projectedP3;}
\DoxyCodeLine{218 }
\DoxyCodeLine{219     projectedP1 = \{extendedP1.\mbox{\hyperlink{class_vector3_a6c9e1b2da59154c65bac9f1e2ca92932}{X}}(), extendedP1.\mbox{\hyperlink{class_vector3_a4cdf9e8af601508983635de175ebac65}{Y}}(), extendedP1.\mbox{\hyperlink{class_vector3_a44d26a20339d2a17c3002001bf57174b}{Z}}()\}; \textcolor{comment}{// Problem wyddaje się być w tym na czym wykonujemy tę wfunkcję (jak dajemy *this to normalnie wykonuje się = z init list)}}
\DoxyCodeLine{220     projectedP2 = \{extendedP2.\mbox{\hyperlink{class_vector3_a6c9e1b2da59154c65bac9f1e2ca92932}{X}}(), extendedP2.\mbox{\hyperlink{class_vector3_a4cdf9e8af601508983635de175ebac65}{Y}}(), extendedP2.\mbox{\hyperlink{class_vector3_a44d26a20339d2a17c3002001bf57174b}{Z}}()\}; \textcolor{comment}{// FIXME moze brak copy constructora dla Vector3 iu Vector4 powoduje te wycieki???????}}
\DoxyCodeLine{221     projectedP3 = \{extendedP3.\mbox{\hyperlink{class_vector3_a6c9e1b2da59154c65bac9f1e2ca92932}{X}}(), extendedP3.\mbox{\hyperlink{class_vector3_a4cdf9e8af601508983635de175ebac65}{Y}}(), extendedP3.\mbox{\hyperlink{class_vector3_a44d26a20339d2a17c3002001bf57174b}{Z}}()\};}
\DoxyCodeLine{222 }
\DoxyCodeLine{223     \textcolor{comment}{/* Scaling object's triangle to world space */}}
\DoxyCodeLine{224     projectedP1 /= extendedP1.\mbox{\hyperlink{class_vector4_a4027284850a7dd6a6e8cfd7b0f42d8dc}{W}}();}
\DoxyCodeLine{225     projectedP2 /= extendedP2.\mbox{\hyperlink{class_vector4_a4027284850a7dd6a6e8cfd7b0f42d8dc}{W}}();}
\DoxyCodeLine{226     projectedP3 /= extendedP3.\mbox{\hyperlink{class_vector4_a4027284850a7dd6a6e8cfd7b0f42d8dc}{W}}();}
\DoxyCodeLine{227 }
\DoxyCodeLine{228     projectedP1 += 1;}
\DoxyCodeLine{229     projectedP2 += 1;}
\DoxyCodeLine{230     projectedP3 += 1;}
\DoxyCodeLine{231 }
\DoxyCodeLine{232     projectedP1 *= 0.5;}
\DoxyCodeLine{233     projectedP2 *= 0.5;}
\DoxyCodeLine{234     projectedP3 *= 0.5;}
\DoxyCodeLine{235 }
\DoxyCodeLine{236     projectedP1.\mbox{\hyperlink{class_vector3_adefc004f13762e3386de5cb557692408}{SetX}}(projectedP1.\mbox{\hyperlink{class_vector3_a6c9e1b2da59154c65bac9f1e2ca92932}{X}}() * \mbox{\hyperlink{class_renderer_wrapper_a3fa9dab708977fda328c046e2aadce01}{Width}}());}
\DoxyCodeLine{237     projectedP1.\mbox{\hyperlink{class_vector3_a84690eeeb8f94037b9103772b8bcb221}{SetY}}(projectedP1.\mbox{\hyperlink{class_vector3_a4cdf9e8af601508983635de175ebac65}{Y}}() * \mbox{\hyperlink{class_renderer_wrapper_a15394b21ef825725cd8c68934a0a7cdb}{Height}}());}
\DoxyCodeLine{238     projectedP2.\mbox{\hyperlink{class_vector3_adefc004f13762e3386de5cb557692408}{SetX}}(projectedP2.\mbox{\hyperlink{class_vector3_a6c9e1b2da59154c65bac9f1e2ca92932}{X}}() * \mbox{\hyperlink{class_renderer_wrapper_a3fa9dab708977fda328c046e2aadce01}{Width}}());}
\DoxyCodeLine{239     projectedP2.\mbox{\hyperlink{class_vector3_a84690eeeb8f94037b9103772b8bcb221}{SetY}}(projectedP2.\mbox{\hyperlink{class_vector3_a4cdf9e8af601508983635de175ebac65}{Y}}() * \mbox{\hyperlink{class_renderer_wrapper_a15394b21ef825725cd8c68934a0a7cdb}{Height}}());}
\DoxyCodeLine{240     projectedP3.\mbox{\hyperlink{class_vector3_adefc004f13762e3386de5cb557692408}{SetX}}(projectedP3.\mbox{\hyperlink{class_vector3_a6c9e1b2da59154c65bac9f1e2ca92932}{X}}() * \mbox{\hyperlink{class_renderer_wrapper_a3fa9dab708977fda328c046e2aadce01}{Width}}());}
\DoxyCodeLine{241     projectedP3.\mbox{\hyperlink{class_vector3_a84690eeeb8f94037b9103772b8bcb221}{SetY}}(projectedP3.\mbox{\hyperlink{class_vector3_a4cdf9e8af601508983635de175ebac65}{Y}}() * \mbox{\hyperlink{class_renderer_wrapper_a15394b21ef825725cd8c68934a0a7cdb}{Height}}());}
\DoxyCodeLine{242 }
\DoxyCodeLine{243     result.\mbox{\hyperlink{class_triangle_a01d55a4d18956260b842ddc4c580b26e}{SetPoints}}(projectedP1.\mbox{\hyperlink{class_vector3_a6c9e1b2da59154c65bac9f1e2ca92932}{X}}(), projectedP1.\mbox{\hyperlink{class_vector3_a4cdf9e8af601508983635de175ebac65}{Y}}(), projectedP1.\mbox{\hyperlink{class_vector3_a44d26a20339d2a17c3002001bf57174b}{Z}}(), projectedP2.\mbox{\hyperlink{class_vector3_a6c9e1b2da59154c65bac9f1e2ca92932}{X}}(), projectedP2.\mbox{\hyperlink{class_vector3_a4cdf9e8af601508983635de175ebac65}{Y}}(), projectedP2.\mbox{\hyperlink{class_vector3_a44d26a20339d2a17c3002001bf57174b}{Z}}(), projectedP3.\mbox{\hyperlink{class_vector3_a6c9e1b2da59154c65bac9f1e2ca92932}{X}}(), projectedP3.\mbox{\hyperlink{class_vector3_a4cdf9e8af601508983635de175ebac65}{Y}}(), projectedP3.\mbox{\hyperlink{class_vector3_a44d26a20339d2a17c3002001bf57174b}{Z}}());}
\DoxyCodeLine{244     \mbox{\hyperlink{class_renderer_wrapper_ae38eae28dbbd7a9a6ab621040fc88101}{DrawFilledTri}}(result.\mbox{\hyperlink{class_triangle_a8e4c246a9a54572c9dc197856d9f7659}{GetPoint}}(0).\mbox{\hyperlink{class_vector3_a6c9e1b2da59154c65bac9f1e2ca92932}{X}}(), result.\mbox{\hyperlink{class_triangle_a8e4c246a9a54572c9dc197856d9f7659}{GetPoint}}(0).\mbox{\hyperlink{class_vector3_a4cdf9e8af601508983635de175ebac65}{Y}}(), result.\mbox{\hyperlink{class_triangle_a8e4c246a9a54572c9dc197856d9f7659}{GetPoint}}(1).\mbox{\hyperlink{class_vector3_a6c9e1b2da59154c65bac9f1e2ca92932}{X}}(), result.\mbox{\hyperlink{class_triangle_a8e4c246a9a54572c9dc197856d9f7659}{GetPoint}}(1).\mbox{\hyperlink{class_vector3_a4cdf9e8af601508983635de175ebac65}{Y}}(), result.\mbox{\hyperlink{class_triangle_a8e4c246a9a54572c9dc197856d9f7659}{GetPoint}}(2).\mbox{\hyperlink{class_vector3_a6c9e1b2da59154c65bac9f1e2ca92932}{X}}(), result.\mbox{\hyperlink{class_triangle_a8e4c246a9a54572c9dc197856d9f7659}{GetPoint}}(2).\mbox{\hyperlink{class_vector3_a4cdf9e8af601508983635de175ebac65}{Y}}(), (uint8\_t)(lightDotProduct * 255), (uint8\_t)(lightDotProduct * 255), (uint8\_t)(lightDotProduct * 255));}
\DoxyCodeLine{245   \}}
\DoxyCodeLine{246   \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{247 \}}
\DoxyCodeLine{248 }
\DoxyCodeLine{249 \textcolor{keyword}{inline} \mbox{\hyperlink{class_matrix}{Matrix<double>}} \&\mbox{\hyperlink{class_renderer_a9c8160c634360c83d3a5d31653c15f6e}{Renderer::GetProjectionMatrix}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} *projMatrix; \}}
\DoxyCodeLine{250 }
\DoxyCodeLine{251 \textcolor{keywordtype}{void} \mbox{\hyperlink{class_renderer_acf73586e7e50e21034aecc3954d88d8e}{Renderer::RecalculateProjectionMatrix}}(\mbox{\hyperlink{class_camera}{Camera}} \&cam)}
\DoxyCodeLine{252 \{}
\DoxyCodeLine{253   \textcolor{keywordtype}{double} q = cam.\mbox{\hyperlink{class_camera_a47d7606590fc2ab2e971fe2f62d32ab6}{GetFFar}}() / (cam.\mbox{\hyperlink{class_camera_a47d7606590fc2ab2e971fe2f62d32ab6}{GetFFar}}() -\/ cam.\mbox{\hyperlink{class_camera_a561a0090c008881dd66d3aafc0b1f846}{GetFNear}}());}
\DoxyCodeLine{254   (*projMatrix)[0][0] = aspectRatio * cam.\mbox{\hyperlink{class_camera_a062b41dec9ba3a28d2c62a46df1c5dc2}{GetFFovRad}}();}
\DoxyCodeLine{255   (*projMatrix)[1][1] = cam.\mbox{\hyperlink{class_camera_a062b41dec9ba3a28d2c62a46df1c5dc2}{GetFFovRad}}();}
\DoxyCodeLine{256   (*projMatrix)[2][2] = q;}
\DoxyCodeLine{257   (*projMatrix)[3][2] = 1.0;}
\DoxyCodeLine{258   (*projMatrix)[2][3] = -\/cam.\mbox{\hyperlink{class_camera_a561a0090c008881dd66d3aafc0b1f846}{GetFNear}}() * q;}
\DoxyCodeLine{259 \}}
\DoxyCodeLine{260 }
\DoxyCodeLine{261 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* \_RENDERER\_HPP\_ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
